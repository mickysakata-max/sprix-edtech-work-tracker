<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sprix EdTech | Work Tracker</title>
  <meta name="description" content="SPRIX Egypt - Ramadan Attendance & Remote Work Tracker">
  <link rel="icon" type="image/png" href="favicon.png?v=2">
  <link rel="apple-touch-icon" href="favicon.png?v=2">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&family=Cairo:wght@400;500;600;700&family=Tajawal:wght@400;500;700;800&family=Montserrat:wght@700;800;900&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="style.css?v=41">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>

  <!-- Auth Overlay -->
  <div class="auth-overlay" id="authOverlay">
    <div class="auth-card">
      <div class="auth-logo-group" style="text-align: center; margin-bottom: 24px;">
        <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
          <div
            style="background: white; padding: 8px 16px; border-radius: 8px; display: inline-flex; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <img src="sprix-logo.png" alt="SPRIX" style="height: 28px; object-fit: contain;">
          </div>
          <span
            style="font-size: 26px; font-weight: 800; color: var(--sprix-navy); font-family: 'Montserrat', sans-serif; letter-spacing: -0.5px;">Ed<span
              style="color: var(--sprix-magenta);">T</span>ech</span>
        </div>
        <div style="font-size: 16px; font-weight: 500; color: var(--sprix-gray); margin-top: 8px; letter-spacing: 1px;">
          Work Tracker
        </div>
      </div>
      <h3 class="auth-title" data-i18n="auth.title">Enter Password</h3>
      <div class="form-group">
        <input type="password" class="form-input" id="authPassword" data-i18n-placeholder="auth.placeholder"
          placeholder="Password" style="text-align: center;">
      </div>
      <div id="authError" class="auth-error" data-i18n="auth.error">Incorrect password</div>
      <button class="btn btn-primary" id="btnAuth" style="width: 100%; margin-top: 16px;"
        data-i18n="auth.btn">Unlock</button>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle" data-i18n="modal.addTitle">Add Employee</h3>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <div class="form-group">
          <label class="form-label" data-i18n="modal.name">Name</label>
          <input type="text" class="form-input" id="empName" data-i18n-placeholder="modal.namePlaceholder"
            placeholder="e.g. Ahmed / Tanaka">
        </div>
        <div class="form-group">
          <label class="form-label" data-i18n="modal.dept">Department</label>
          <input type="text" class="form-input" id="empDept" data-i18n-placeholder="modal.deptPlaceholder"
            placeholder="e.g. Operations / Sales">
        </div>
        <div class="form-group">
          <label class="form-label" data-i18n="modal.shift">Default Shift</label>
          <select class="form-select" id="empShift">
            <option value="opt1" data-i18n="shift.normal1">9:00 - 18:00</option>
            <option value="opt2" data-i18n="shift.normal2">10:00 - 19:00</option>
            <option value="custom" data-i18n="shift.custom">Custom Time...</option>
          </select>
        </div>
        <div class="form-group" id="customShiftGroup" style="display: none;">
          <label class="form-label" data-i18n="modal.customShift">Custom Shift Time</label>
          <input type="text" class="form-input" id="empCustomShift" data-i18n-placeholder="modal.customShiftPlaceholder"
            placeholder="e.g. 08:30 - 17:30">
        </div>
        <div class="form-group">
          <label class="form-label" data-i18n="modal.remoteDay">Remote Work Day</label>
          <select class="form-select" id="empRemoteDay">
            <option value="" data-i18n="modal.none">None</option>
            <option value="0" data-i18n="day.sun">Sunday</option>
            <option value="1" data-i18n="day.mon">Monday</option>
            <option value="2" data-i18n="day.tue">Tuesday</option>
            <option value="3" data-i18n="day.wed">Wednesday</option>
            <option value="4" data-i18n="day.thu">Thursday</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="modalCancel" data-i18n="modal.cancel">Cancel</button>
        <button class="btn btn-primary" id="modalSave" data-i18n="modal.save">Save</button>
      </div>
    </div>
  </div>

  <!-- App Layout -->
  <div class="app-layout">

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <span class="logo-text" style="display: flex; align-items: center; gap: 8px;">
            <div style="background: white; padding: 4px 8px; border-radius: 4px; display: flex; align-items: center;">
              <img src="sprix-logo.png" alt="SPRIX" style="height: 18px; object-fit: contain;">
            </div>
            <span class="logo-edtech"
              style="font-family: 'Montserrat', sans-serif; font-weight: 800; letter-spacing: -0.5px; color: var(--sprix-navy);">Ed<span
                style="color: var(--sprix-magenta);">T</span>ech</span>
          </span>
        </div>
        <div class="sidebar-subtitle" data-i18n="sidebar.subtitle">RAMADAN WORK TRACKER 2026</div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-view="dashboard" id="navDashboard">
          <span class="nav-icon"><i class="ph ph-squares-four"></i></span>
          <span data-i18n="nav.dashboard">Dashboard</span>
        </button>
        <button class="nav-item" data-view="analytics" id="navAnalytics">
          <span class="nav-icon"><i class="ph ph-chart-line-up"></i></span>
          <span data-i18n="nav.analytics">Analytics</span>
        </button>
        <button class="nav-item" data-view="calendar" id="navCalendar">
          <span class="nav-icon"><i class="ph ph-calendar-blank"></i></span>
          <span data-i18n="nav.calendar">Calendar</span>
        </button>
        <button class="nav-item" data-view="employees" id="navEmployees">
          <span class="nav-icon"><i class="ph ph-users"></i></span>
          <span data-i18n="nav.employees">Employees</span>
        </button>
        <button class="nav-item" data-view="export" id="navExport">
          <span class="nav-icon">üì§</span>
          <span data-i18n="nav.export">Export</span>
        </button>
        <button class="nav-item" data-view="settings" id="navSettings">
          <span class="nav-icon"><i class="ph ph-gear"></i></span>
          <span data-i18n="nav.settings">Settings</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <div class="qureo-mascot"></div>
        <div class="ramadan-info" id="ramadanInfoCard">
          <i class="ph ph-moon-stars ramadan-icon"></i>
          <div class="ramadan-label" data-i18n="ramadan.label">Ramadan Day</div>
          <div class="ramadan-day" id="ramadanDay">0</div>
          <div class="ramadan-day-label" id="ramadanDate">Loading...</div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Header -->
      <header class="header">
        <div class="header-left">
          <button class="menu-toggle" id="menuToggle">‚ò∞</button>
          <div>
            <h1 class="header-title" id="headerTitle" data-i18n="nav.dashboard">Dashboard</h1>
            <p class="header-date" id="headerDate"></p>
          </div>
        </div>
        <div class="header-right">
          <div class="lang-switcher" id="langSwitcher">
            <button class="lang-btn" data-lang="en" onclick="setLanguage('en')">EN</button>
            <button class="lang-btn" data-lang="ja" onclick="setLanguage('ja')">Êó•Êú¨Ë™û</button>
            <button class="lang-btn" data-lang="ar" onclick="setLanguage('ar')">ÿπÿ±ÿ®Ÿä</button>
            <div class="divider" style="width: 1px; height: 16px; background: var(--gray-300); margin: 0 4px;"></div>
            <button class="lang-btn font-size-btn" onclick="toggleTextSize()" title="Increase Text Size"
              id="btnTextSize">Aa</button>
          </div>
          <!-- Connection Status hidden as per user request -->
          <div class="connection-status hidden" id="connectionStatus" onclick="switchView('settings')"
            style="display: none;">
            <span class="status-indicator local" id="statusDot"></span>
            <span class="status-text" id="statusText">Local Mode</span>
          </div>
        </div>
      </header>

      <!-- Desktop Multi-Column Layout Removed -->

      <!-- Main Content Area -->
      <div class="page-content">

        <!-- Dashboard Horizontal Stats -->
        <div class="dashboard-stats" id="dashboardStats">
          <div class="status-card" onclick="filterByStatus('total')">
            <div class="status-icon"><i class="ph-fill ph-users-three" style="color: var(--sprix-blue);"></i></div>
            <div class="status-info">
              <h3 id="globalTotal">0</h3>
              <p data-i18n="status.total">Total Employees</p>
            </div>
          </div>
          <div class="status-card office" onclick="filterByStatus('office')">
            <div class="status-icon"><i class="ph-fill ph-buildings" style="color: var(--sprix-blue);"></i></div>
            <div class="status-info">
              <h3 id="globalOffice">0</h3>
              <p data-i18n="status.inOffice">In Office</p>
            </div>
          </div>
          <div class="status-card remote" onclick="filterByStatus('remote')">
            <div class="status-icon"><i class="ph-fill ph-house-line" style="color: var(--sprix-blue);"></i></div>
            <div class="status-info">
              <h3 id="globalRemote">0</h3>
              <p data-i18n="status.remote">Remote Work</p>
            </div>
          </div>
          <div class="status-card leave" onclick="filterByStatus('leave')">
            <div class="status-icon"><i class="ph-fill ph-moon" style="color: var(--sprix-blue);"></i></div>
            <div class="status-info">
              <h3 id="globalLeave">0</h3>
              <p data-i18n="status.leave">Leave / Off</p>
            </div>
          </div>
          <div class="status-card finished" onclick="filterByStatus('finished')">
            <div class="status-icon"><i class="ph-fill ph-flag-checkered" style="color: var(--sprix-blue);"></i></div>
            <div class="status-info">
              <h3 id="globalFinished">0</h3>
              <p data-i18n="analytics.finished">Finished</p>
            </div>
          </div>
        </div>

        <div class="view active" id="viewDashboard">
          <div class="section-header">
            <h2 class="section-title" data-i18n="dashboard.todayTitle">Today's Attendance</h2>
            <div class="section-actions">
              <button class="btn btn-accent" id="btnAddEmployee">
                <span>Ôºã</span>
                <span data-i18n="dashboard.addEmployee">Add Employee</span>
              </button>
            </div>
          </div>

          <!-- Active Filter Badge -->
          <div id="filterActiveBadge" class="filter-badge hidden"
            style="display: none; margin-bottom: 20px; align-items: center; gap: 12px; background: rgba(75, 141, 248, 0.1); padding: 10px 16px; border-radius: 12px; border: 1px solid rgba(75, 141, 248, 0.2);">
            <span style="font-size: 14px; font-weight: 500; color: var(--sprix-navy);">
              <span data-i18n="filter.showing">Showing:</span>
              <strong id="filterTextName">Total Employees</strong>
            </span>
            <button class="btn btn-outline" onclick="clearFilter()"
              style="padding: 4px 10px; font-size: 12px; border-radius: 8px;">‚úï Clear</button>
          </div>

          <div class="employee-grid" id="employeeGrid">
            <div class="empty-state" id="emptyState">
              <div class="empty-icon"><i class="ph ph-users" style="color: var(--sprix-blossom);"></i></div>
              <p><span data-i18n="emp.emptyTitle">No employees registered</span><br><span
                  data-i18n="emp.emptyAction">Click
                  "Add Employee" to get started</span></p>
              <button class="btn btn-primary" id="btnAddFirst" data-i18n="emp.addFirst">Ôºã Add First Employee</button>
            </div>
          </div>
        </div>

        <!-- Analytics View -->
        <div class="view" id="viewAnalytics">
          <div class="section-header">
            <h2 class="section-title" data-i18n="analytics.title">Statistics & Analytics</h2>
          </div>
          <div class="analytics-container">
            <div class="chart-wrapper">
              <canvas id="attendanceChart"></canvas>
            </div>
            <div class="analytics-summary" id="analyticsSummary">
              <!-- Summary blocks populated by JS -->
            </div>
          </div>
        </div>

        <!-- Calendar View -->
        <div class="view" id="viewCalendar">
          <div class="calendar-container">
            <div class="calendar-header">
              <div class="calendar-nav">
                <button class="calendar-nav-btn" id="calPrev">‚óÄ</button>
              </div>
              <h3 class="calendar-title" id="calTitle">March 2026</h3>
              <div class="calendar-nav">
                <button class="calendar-nav-btn" id="calNext">‚ñ∂</button>
              </div>
            </div>
            <div class="calendar-grid" id="calendarGrid"></div>
          </div>
          <div class="calendar-legend">
            <div class="legend-item">
              <span class="calendar-dot office"></span> <span data-i18n="btn.office">üè¢ Office</span>
            </div>
            <div class="legend-item">
              <span class="calendar-dot remote"></span> <span data-i18n="btn.remote">üè† Remote</span>
            </div>
            <div class="legend-item">
              <span class="calendar-dot leave"></span> <span data-i18n="btn.leave">üåô Leave</span>
            </div>
          </div>
        </div>

        <!-- Employees View -->
        <div class="view" id="viewEmployees">
          <div class="section-header">
            <h2 class="section-title" data-i18n="table.listTitle">Employee List</h2>
            <div class="section-actions">
              <button class="btn btn-accent" id="btnAddEmployee2">
                <span>Ôºã</span>
                <span data-i18n="dashboard.add">Add</span>
              </button>
            </div>
          </div>
          <div class="employee-table-container">
            <table class="employee-table" id="employeeTable">
              <thead>
                <tr>
                  <th data-i18n="table.name">Name</th>
                  <th data-i18n="table.department">Department</th>
                  <th data-i18n="table.defaultShift">Default Shift</th>
                  <th data-i18n="table.remoteDay">Remote Day</th>
                  <th data-i18n="table.actions">Actions</th>
                </tr>
              </thead>
              <tbody id="employeeTableBody"></tbody>
            </table>
          </div>
        </div>

        <!-- Export View -->
        <div class="view" id="viewExport">
          <div class="section-header">
            <h2 class="section-title" data-i18n="export.title">Data Export</h2>
          </div>
          <div class="export-cards">
            <div class="export-card">
              <h3><i class="ph-fill ph-file-csv" style="color: #4CAF50;"></i> <span data-i18n="export.csvTitle">CSV
                  Export</span></h3>
              <p data-i18n="export.csvDesc">Download all attendance data as CSV</p>
              <button class="btn btn-primary" id="btnExportCSV" data-i18n="export.csvBtn">üì• Download CSV</button>
            </div>
            <div class="export-card">
              <h3><i class="ph-fill ph-file-code" style="color: var(--sprix-navy);"></i> <span
                  data-i18n="export.jsonTitle">JSON Backup</span></h3>
              <p data-i18n="export.jsonDesc">Save a backup of all data</p>
              <div class="export-btn-group">
                <button class="btn btn-outline" id="btnExportJSON" data-i18n="export.backupBtn">üì• Save
                  Backup</button>
                <label class="btn btn-outline" style="cursor: pointer;">
                  <span data-i18n="export.restoreBtn">üì§ Restore</span>
                  <input type="file" accept=".json" id="btnImportJSON" style="display: none;">
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings View -->
        <div class="view" id="viewSettings">
          <div class="section-header">
            <h2 class="section-title" data-i18n="settings.title">Settings</h2>
          </div>
          <div class="export-cards">
            <div class="export-card">
              <h3><i class="ph-fill ph-buildings" style="color: var(--sprix-blue);"></i> <span
                  data-i18n="settings.workMode">Working Mode</span>
              </h3>
              <div class="form-group" style="margin-top: 12px;">
                <select class="form-select" id="workModeSelect" onchange="changeWorkMode()">
                  <option value="normal" data-i18n="mode.normal">Normal Mode (8H inc. break)</option>
                  <option value="ramadan" data-i18n="mode.ramadan">Ramadan Mode (6H short)</option>
                </select>
              </div>
            </div>

            <div class="export-card">
              <h3><i class="ph-fill ph-palette" style="color: var(--sprix-red);"></i> <span
                  data-i18n="settings.theme">Theme & Appearance</span>
              </h3>
              <div class="form-group" style="margin-top: 12px;">
                <select class="form-select" id="themeSelect" onchange="changeTheme()">
                  <option value="light" data-i18n="theme.light">Light Mode</option>
                  <option value="dark" data-i18n="theme.dark">Dark Mode</option>
                </select>
              </div>
            </div>
          </div>
        </div>

      </div> <!-- /page-content -->




    </main>
  </div>

  <script src="i18n.js?v=8"></script>
  <script src="app.js?v=13"></script>
</body>

</html>